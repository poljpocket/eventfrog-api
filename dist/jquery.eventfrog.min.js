(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){(function(global){(function(){const EventFrogService=require("./service/EventFrogService");const $=typeof window!=="undefined"?window["jQuery"]:typeof global!=="undefined"?global["jQuery"]:null;module.exports=async function(customOptions){let options=$.extend({apiKey:"",amount:0,perPage:0,page:1,search:"",group:"",organization:""},customOptions);let queryArgs={};if(options.search.length>0)queryArgs=$.extend({q:options.search},queryArgs);if(options.perPage>0&&options.amount===0)queryArgs=$.extend({perPage:options.perPage},queryArgs);if(options.page>0)queryArgs=$.extend({page:options.page},queryArgs);if(options.organization.length)queryArgs=$.extend({orgId:options.organization},queryArgs);const eventFrogLoader=new EventFrogService(options.apiKey);let events=await eventFrogLoader.loadEvents(queryArgs);if(options.perPage===0&&options.amount>0){events=events.filter(event=>options.group.length?event.group.id===options.group:true);events=events.slice(0,options.amount)}return events}}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"./service/EventFrogService":7}],2:[function(require,module,exports){const EventFrogUtil=require("../util/EventFrogUtil");class EventFrogEvent{constructor(data){this.id=data.id;this.externalSourceId=data.extSrcId;this.externalId=data.extId;this.groupId=data.groupId;this.topicId=data.rubricId;this._title=data.title;this.link=data.url;this.organizer={id:data.organizerId,name:data.organizerName,website:data.websiteUrl,facebook:data.facebookUrl,twitter:data.twitterUrl};this.presale={link:data.presaleLink,text:data.presaleText};this.image=data.emblemToShow;this.startDate=new Date(Date.parse(data.begin));this.endDate=new Date(Date.parse(data.end));this.cancelled=data.cancelled;this.visible=data.visible;this.published=data.published;this.agendaOnly=data.agendaEntryOnly;this.locationId=data.locationIds.length?data.locationIds[0]:null;this.dateModified=new Date(Date.parse(data.modifyDate));this._summary=data.shortDescription;this._html=data.descriptionAsHTML;this.location=null;this.group=null;this.topic=null}get title(){return EventFrogUtil.getLocalizedString(this._title)}get summary(){return EventFrogUtil.getLocalizedString(this._summary)}get html(){return EventFrogUtil.getLocalizedString(this._html)}}EventFrogEvent.apiEdge="/events.json";module.exports=EventFrogEvent},{"../util/EventFrogUtil":8}],3:[function(require,module,exports){const EventFrogUtil=require("../util/EventFrogUtil");class EventFrogGroup{constructor(data){this.id=data.id;this._title=data.title;this.link="https://eventfrog.ch"+data.url;this._html=data.descriptionAsHTML;this.image=data.imgs;this.dateModified=new Date(Date.parse(data.modifyDate))}get title(){return this._title}get html(){return EventFrogUtil.getLocalizedString(this._html)}}EventFrogGroup.apiEdge="/eventgroups.json";module.exports=EventFrogGroup},{"../util/EventFrogUtil":8}],4:[function(require,module,exports){const EventFrogUtil=require("../util/EventFrogUtil");class EventFrogLocation{constructor(data){this.id=data.id;this._title=data.title;this.link=data.url;this._html=data.descriptionAsHTML;this.image=data.img;this.address=data.addressLine;this.zip=data.zip;this.city=data.city;this.latitude=data.lat;this.longitude=data.lng;this.organizer={website:data.websiteUrl,facebook:data.facebookUrl,twitter:data.twitterUrl};this.dateModified=new Date(Date.parse(data.modifyDate))}get title(){return EventFrogUtil.getLocalizedString(this._title)}get html(){return EventFrogUtil.getLocalizedString(this._html)}}EventFrogLocation.apiEdge="/locations.json";module.exports=EventFrogLocation},{"../util/EventFrogUtil":8}],5:[function(require,module,exports){class EventFrogTopic{constructor(data){this.id=data.id;this.parentId=data.parentId;this._title=data.title;this.parent=null}get title(){return this._title}}EventFrogTopic.apiEdge="/rubrics.json";module.exports=EventFrogTopic},{}],6:[function(require,module,exports){const EventFrog=require("./EventFrog");const EventFrogService=require("./service/EventFrogService");(function($){const jQueryEventFrog=async function(opts){return EventFrog(opts)};const jQueryEventFrogService=function(key){return new EventFrogService(key)};const jQueryEventFrogPromise=function(opts,success,error){jQueryEventFrog(opts).then(success).catch(error)};$.extend({eventfrog:jQueryEventFrog,eventfrogService:jQueryEventFrogService,efapi:jQueryEventFrogPromise})})(jQuery)},{"./EventFrog":1,"./service/EventFrogService":7}],7:[function(require,module,exports){(function(global){(function(){const EventFrogEvent=require("../entity/EventFrogEvent");const EventFrogGroup=require("../entity/EventFrogGroup");const EventFrogLocation=require("../entity/EventFrogLocation");const EventFrogTopic=require("../entity/EventFrogTopic");const $=typeof window!=="undefined"?window["jQuery"]:typeof global!=="undefined"?global["jQuery"]:null;class EventFrogService{constructor(apiKey){this._key=apiKey}async loadEvents(options){let events=await this.getEvents(options);await this.mapLocations(events);await this.mapGroups(events);return events}async mapLocations(events){const locationIds=new Set(events.map(e=>e.locationId));const locations=await this.getLocations({id:[...locationIds]});const locationMap=new Map(locations.map(i=>[i.id,i]));events.forEach(event=>{event.location=locationMap.get(event.locationId)})}async mapGroups(events){const groupIds=new Set(events.map(e=>e.groupId));const groupData=await this.getGroups({groupId:[...groupIds]});const groupMap=new Map(groupData.map(i=>[i.id,i]));events.forEach(event=>{event.group=groupMap.get(event.groupId)})}async mapTopics(events){const topics=await this.loadTopics();const topicsMap=new Map(topics.map(i=>[i.id,i]));events.forEach(event=>{event.topic=topicsMap.get(event.topicId)})}async getEvents(options){const eventData=await this._get(EventFrogEvent.apiEdge,options);return eventData.events.map(i=>new EventFrogEvent(i))}async getLocations(options){const locationsData=await this._get(EventFrogLocation.apiEdge,options);return locationsData.locations.map(element=>new EventFrogLocation(element))}async getLocationsByIds(ids){return this.getLocations({id:ids})}async getGroups(options){const groupData=await this._get(EventFrogGroup.apiEdge,options);return groupData.eventgroups.map(i=>new EventFrogGroup(i))}async getGroupsByIds(ids){return this.getGroups({groupId:ids})}async loadTopics(){let topics=await this.getTopics();this.mapTopicParents(topics);return topics}async getTopics(){const topicData=await this._get(EventFrogTopic.apiEdge,{});return topicData.rubrics.map(i=>new EventFrogTopic(i))}mapTopicParents(topics){const topicMap=new Map(topics.map(i=>[i.id,i]));topics.forEach(topic=>{topic.parent=topicMap.get(topic.parentId)})}_get(edge,options){options.apiKey=this._key;return new Promise((resolve,reject)=>{$.ajax({url:EventFrogService._base+edge,method:"GET",data:options,success:resolve,error:reject,traditional:true})})}}EventFrogService._base="//api.eventfrog.net/api/v1";module.exports=EventFrogService}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{"../entity/EventFrogEvent":2,"../entity/EventFrogGroup":3,"../entity/EventFrogLocation":4,"../entity/EventFrogTopic":5}],8:[function(require,module,exports){class EventFrogUtil{static getLocalizedString(versions,preferredLocale="de"){if(Object.keys(versions).length){if(preferredLocale in versions)return versions[preferredLocale];return versions[Object.keys(versions)[0]]}return null}}module.exports=EventFrogUtil},{}]},{},[6]);